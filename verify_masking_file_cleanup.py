# -*- coding: utf-8 -*-
"""
ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ ì‚­ì œ ë²„ê·¸ ìˆ˜ì • ê²€ì¦

ë¬¸ì œ:
- convert_label_to_mask() í•¨ìˆ˜ê°€ ë©”ëª¨ë¦¬ ë³€ìˆ˜ëŠ” ì´ˆê¸°í™”í–ˆì§€ë§Œ
- ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼(_mask.npz)ì€ ì‚­ì œí•˜ì§€ ì•ŠìŒ
- ë‹¤ìŒ í˜ì´ì§€ì—ì„œ l ë²„íŠ¼ìœ¼ë¡œ ë§ˆìŠ¤í‚¹ ë¡œë“œí•˜ë©´ ì´ì „ ë§ˆìŠ¤í‚¹ì´ ë‹¤ì‹œ ë‚˜íƒ€ë‚¨

ìˆ˜ì •:
- convert_label_to_mask() í•¨ìˆ˜ì—ì„œ ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ë„ ì‚­ì œ
"""

GREEN = '\033[92m'
RED = '\033[91m'
BLUE = '\033[94m'
YELLOW = '\033[93m'
RESET = '\033[0m'

def print_header(title):
    print(f"\n{BLUE}{'=' * 80}{RESET}")
    print(f"{BLUE}{title}{RESET}")
    print(f"{BLUE}{'=' * 80}{RESET}\n")

def print_success(msg):
    print(f"{GREEN}âœ“ {msg}{RESET}")

def print_error(msg):
    print(f"{RED}âœ— {msg}{RESET}")

def print_info(msg):
    print(f"  {msg}")

print_header("ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ ì‚­ì œ ë²„ê·¸ ìˆ˜ì • ê²€ì¦")

# =================================================================
# ë¬¸ì œ ë¶„ì„
# =================================================================

print("ğŸ› ë°œê²¬ëœ ë¬¸ì œ:")
print()
print_error("labelâ†’mask í›„ ë‹¤ìŒ í˜ì´ì§€ì—ì„œ l ë²„íŠ¼ ëˆ„ë¥´ë©´ ì´ì „ ë§ˆìŠ¤í‚¹ ë‚˜íƒ€ë‚¨")
print()

print("ğŸ“‹ ì›ì¸ ë¶„ì„:")
print()
print_info("1. convert_label_to_mask() í•¨ìˆ˜ëŠ”:")
print_info("   - ì´ë¯¸ì§€ íŒŒì¼ì— ë§ˆìŠ¤í‚¹ì„ ì €ì¥ (4783-4788ë²ˆ ì¤„)")
print_info("   - ë©”ëª¨ë¦¬ ë³€ìˆ˜ë“¤ì„ ì´ˆê¸°í™” (4814-4818ë²ˆ ì¤„)")
print_info("   - í•˜ì§€ë§Œ ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼(_mask.npz)ì€ ì‚­ì œí•˜ì§€ ì•ŠìŒ âœ—")
print()

print_info("2. ë§ˆìŠ¤í‚¹ ë¡œë“œ ì‹œ:")
print_info("   - l ë²„íŠ¼ í´ë¦­ â†’ load_masking() í˜¸ì¶œ")
print_info("   - load_masking_info_from_file() í•¨ìˆ˜ê°€ _mask.npz íŒŒì¼ ì°¾ìŒ")
print_info("   - íŒŒì¼ì´ ì¡´ì¬í•˜ë©´ ì´ì „ ë§ˆìŠ¤í‚¹ ì •ë³´ ë¡œë“œ")
print_info("   - ê²°ê³¼: ì´ì „ ë§ˆìŠ¤í‚¹ì´ ë‹¤ì‹œ ë‚˜íƒ€ë‚¨ âœ—")
print()

# =================================================================
# ìˆ˜ì • ë‚´ìš©
# =================================================================

print_header("ìˆ˜ì • ë‚´ìš©")

print("ğŸ“ ìˆ˜ì • ìœ„ì¹˜: 04.GTGEN_Tool_svms_v2.py:4820-4827")
print()

print(f"{YELLOW}[ìˆ˜ì • ì „]{RESET}")
print("    # ë§ˆìŠ¤í‚¹ ì •ë³´ ì´ˆê¸°í™” (ì‘ì—… ì™„ë£Œ í›„ ê¹”ë”í•˜ê²Œ ì •ë¦¬)")
print("    self.masking = None")
print("    self.has_saved_masking = False")
print("    self.is_masking_dirty = False")
print("    self.current_img_array = None")
print("    self.original_img_array = None")
print("    ")
print("    print('ë¼ë²¨ì´ ë§ˆìŠ¤í‚¹ìœ¼ë¡œ ë³€í™˜ë˜ì—ˆìŠµë‹ˆë‹¤. (ë§ˆìŠ¤í‚¹ ì •ë³´ ì´ˆê¸°í™” ì™„ë£Œ)')")
print()

print(f"{GREEN}[ìˆ˜ì • í›„]{RESET}")
print("    # ë§ˆìŠ¤í‚¹ ì •ë³´ ì´ˆê¸°í™” (ì‘ì—… ì™„ë£Œ í›„ ê¹”ë”í•˜ê²Œ ì •ë¦¬)")
print("    self.masking = None")
print("    self.has_saved_masking = False")
print("    self.is_masking_dirty = False")
print("    self.current_img_array = None")
print("    self.original_img_array = None")
print("    ")
print(f"{GREEN}    # ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ë„ ì‚­ì œ (ì¤‘ìš”!){RESET}")
print(f"{GREEN}    mask_info_file = self.im_fn.replace('.jpg', '_mask.npz').replace('.png', '_mask.npz'){RESET}")
print(f"{GREEN}    if os.path.exists(mask_info_file):{RESET}")
print(f"{GREEN}        try:{RESET}")
print(f"{GREEN}            os.remove(mask_info_file){RESET}")
print(f"{GREEN}            print(f'ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ ì‚­ì œë¨: {{mask_info_file}}'){RESET}")
print(f"{GREEN}        except Exception as e:{RESET}")
print(f"{GREEN}            print(f'ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ ì‚­ì œ ì˜¤ë¥˜: {{e}}'){RESET}")
print("    ")
print("    print('ë¼ë²¨ì´ ë§ˆìŠ¤í‚¹ìœ¼ë¡œ ë³€í™˜ë˜ì—ˆìŠµë‹ˆë‹¤. (ë§ˆìŠ¤í‚¹ ì •ë³´ ì™„ì „íˆ ì´ˆê¸°í™” ì™„ë£Œ)')")
print()

# =================================================================
# ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
# =================================================================

print_header("ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸")

print("ì‹œë‚˜ë¦¬ì˜¤: labelâ†’mask í›„ ë§ˆìŠ¤í‚¹ ë¡œë“œ")
print("-" * 80)
print()

print("1ï¸âƒ£ ê¸°ì¡´ ë™ì‘ (ë²„ê·¸)")
print_info("1. ì´ë¯¸ì§€ Aì—ì„œ ë¼ë²¨ ì„ íƒ")
print_info("2. labelâ†’mask ë²„íŠ¼ í´ë¦­")
print_info("3. ë§ˆìŠ¤í‚¹ ì´ë¯¸ì§€ íŒŒì¼ì— ì €ì¥")
print_info("4. ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼(_mask.npz) ìƒì„±")
print_info("5. ë©”ëª¨ë¦¬ ë³€ìˆ˜ë“¤ ì´ˆê¸°í™” âœ“")
print_info("6. ì´ë¯¸ì§€ Bë¡œ ì´ë™")
print_info("7. ë‹¤ì‹œ ì´ë¯¸ì§€ Aë¡œ ëŒì•„ì˜´")
print_info("8. l ë²„íŠ¼ í´ë¦­ (ë§ˆìŠ¤í‚¹ ë¡œë“œ)")
print_info("9. load_masking_info_from_file()ì´ _mask.npz íŒŒì¼ ë°œê²¬")
print_info("10. ì´ì „ ë§ˆìŠ¤í‚¹ ì •ë³´ ë¡œë“œë¨ âœ—")
print_error("ê²°ê³¼: ì´ë¯¸ ì™„ë£Œëœ ë§ˆìŠ¤í‚¹ì´ ë‹¤ì‹œ ë‚˜íƒ€ë‚¨!")
print()

print("2ï¸âƒ£ ìˆ˜ì •ëœ ë™ì‘")
print_info("1. ì´ë¯¸ì§€ Aì—ì„œ ë¼ë²¨ ì„ íƒ")
print_info("2. labelâ†’mask ë²„íŠ¼ í´ë¦­")
print_info("3. ë§ˆìŠ¤í‚¹ ì´ë¯¸ì§€ íŒŒì¼ì— ì €ì¥")
print_info("4. ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼(_mask.npz) ìƒì„±")
print_info("5. ë©”ëª¨ë¦¬ ë³€ìˆ˜ë“¤ ì´ˆê¸°í™” âœ“")
print_info("6. ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼(_mask.npz) ì‚­ì œ âœ“")
print_info("7. ì´ë¯¸ì§€ Bë¡œ ì´ë™")
print_info("8. ë‹¤ì‹œ ì´ë¯¸ì§€ Aë¡œ ëŒì•„ì˜´")
print_info("9. l ë²„íŠ¼ í´ë¦­ (ë§ˆìŠ¤í‚¹ ë¡œë“œ)")
print_info("10. load_masking_info_from_file()ì´ _mask.npz íŒŒì¼ ì—†ìŒ")
print_info("11. 'ì €ì¥ëœ ë§ˆìŠ¤í‚¹ì´ ì—†ìŠµë‹ˆë‹¤' ê²½ê³  í‘œì‹œ âœ“")
print_success("ê²°ê³¼: ê¹”ë”í•˜ê²Œ ì´ˆê¸°í™”ë¨!")
print()

# =================================================================
# íŒŒì¼ ê´€ë¦¬
# =================================================================

print_header("íŒŒì¼ ê´€ë¦¬")

print("ë§ˆìŠ¤í‚¹ ê´€ë ¨ íŒŒì¼ë“¤:")
print()
print_info("1. ì´ë¯¸ì§€ íŒŒì¼ (ì˜ˆ: image001.jpg)")
print_info("   - labelâ†’mask ì‹¤í–‰ ì‹œ ì´ë¯¸ì§€ì— ë§ˆìŠ¤í‚¹ ê·¸ë ¤ì§")
print_info("   - ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥ë¨ (ì˜ë„ëœ ë™ì‘)")
print()
print_info("2. ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ (ì˜ˆ: image001_mask.npz)")
print_info("   - ë§ˆìŠ¤í‚¹ ë³µì‚¬ ê¸°ëŠ¥ì„ ìœ„í•œ ì„ì‹œ íŒŒì¼")
print_info("   - labelâ†’mask ì™„ë£Œ í›„ ì‚­ì œë˜ì–´ì•¼ í•¨ (ìˆ˜ì •ë¨)")
print()
print_info("3. ë°±ì—… íŒŒì¼ (original_backup/)")
print_info("   - ì›ë³¸ ì´ë¯¸ì§€ ë° ë¼ë²¨ ë°±ì—…")
print_info("   - ë³µì› ì‹œ ì‚¬ìš©")
print()

print("ì‚­ì œ ëŒ€ìƒ íŒŒì¼:")
print_success("âœ“ _mask.npz íŒŒì¼ì€ ì‘ì—… ì™„ë£Œ í›„ ìë™ ì‚­ì œ")
print()

# =================================================================
# ì˜í–¥ ë¶„ì„
# =================================================================

print_header("ì˜í–¥ ë¶„ì„")

print("âœ… ê¸ì •ì  ì˜í–¥:")
print_info("1. labelâ†’mask ì‘ì—… í›„ ì™„ì „íˆ ê¹”ë”í•œ ìƒíƒœ")
print_info("2. ë‹¤ìŒ í˜ì´ì§€ì—ì„œ l ë²„íŠ¼ ëˆŒëŸ¬ë„ ì´ì „ ë§ˆìŠ¤í‚¹ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ")
print_info("3. ë¶ˆí•„ìš”í•œ _mask.npz íŒŒì¼ ìë™ ì •ë¦¬")
print_info("4. ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½")
print()

print("âš ï¸ ì£¼ì˜ì‚¬í•­:")
print_info("1. ë§ˆìŠ¤í‚¹ ë³µì‚¬ ê¸°ëŠ¥ ì‚¬ìš© ì‹œ ë§¤ë²ˆ ìƒˆë¡œ ë§ˆìŠ¤í‚¹ ìƒì„± í•„ìš”")
print_info("2. ì´ë¯¸ì§€ íŒŒì¼ ìì²´ëŠ” ë§ˆìŠ¤í‚¹ì´ ê·¸ë ¤ì§„ ìƒíƒœë¡œ ìœ ì§€ (ì˜ë„ëœ ë™ì‘)")
print()

print("ğŸ”’ ì•ˆì „ì„±:")
print_info("1. os.remove() ì „ì— íŒŒì¼ ì¡´ì¬ í™•ì¸")
print_info("2. try-exceptë¡œ ì‚­ì œ ì˜¤ë¥˜ ì²˜ë¦¬")
print_info("3. ì‚­ì œ ì‹¤íŒ¨ ì‹œ ê²½ê³ ë§Œ ì¶œë ¥í•˜ê³  ê³„ì† ì§„í–‰")
print()

# =================================================================
# í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
# =================================================================

print_header("í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸")

print("[ ] 1. labelâ†’mask ê¸°ë³¸ ë™ì‘")
print_info("    - ë¼ë²¨ ì„ íƒ í›„ labelâ†’mask ì‹¤í–‰")
print_info("    - ì´ë¯¸ì§€ì— ë§ˆìŠ¤í‚¹ ì ìš© í™•ì¸")
print_info("    - ë¼ë²¨ íŒŒì¼ì—ì„œ í•´ë‹¹ ë¼ë²¨ ì‚­ì œ í™•ì¸")
print()

print("[ ] 2. ë§ˆìŠ¤í‚¹ ì •ë³´ ì´ˆê¸°í™”")
print_info("    - labelâ†’mask ì™„ë£Œ í›„")
print_info("    - _mask.npz íŒŒì¼ì´ ì‚­ì œë˜ì—ˆëŠ”ì§€ í™•ì¸")
print_info("    - ë©”ëª¨ë¦¬ ë³€ìˆ˜ë“¤ì´ Noneì¸ì§€ í™•ì¸")
print()

print("[ ] 3. ë‹¤ìŒ í˜ì´ì§€ ì´ë™ í›„ í…ŒìŠ¤íŠ¸")
print_info("    - labelâ†’mask ì‹¤í–‰í•œ ì´ë¯¸ì§€ì—ì„œ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™")
print_info("    - ë‹¤ì‹œ ëŒì•„ì™€ì„œ l ë²„íŠ¼ í´ë¦­")
print_info("    - 'ì €ì¥ëœ ë§ˆìŠ¤í‚¹ì´ ì—†ìŠµë‹ˆë‹¤' ê²½ê³  í‘œì‹œ í™•ì¸")
print()

print("[ ] 4. ë§ˆìŠ¤í‚¹ ë³µì‚¬ ê¸°ëŠ¥")
print_info("    - ìƒˆë¡œìš´ ë§ˆìŠ¤í‚¹ ìƒì„±")
print_info("    - ë§ˆìŠ¤í‚¹ ë³µì‚¬ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸")
print()

# =================================================================
# ë‹¤ì¤‘ ì„ íƒ ê´€ë ¨ ì¶”ê°€ ì •ë³´ ìš”ì²­
# =================================================================

print_header("ë‹¤ì¤‘ ì„ íƒ ë³µì‚¬ ê¸°ëŠ¥ í™•ì¸ í•„ìš”")

print(f"{YELLOW}âš ï¸  ì¶”ê°€ ì •ë³´ í•„ìš”:{RESET}")
print()
print_info('ì‚¬ìš©ìê°€ "ë‹¤ì¤‘ ì„ íƒ ë° ë³µì‚¬ ê¸°ëŠ¥ì€ ì•„ì§ ë¯¸ê°œì„ "ì´ë¼ê³  ì–¸ê¸‰')
print()
print("ê°€ëŠ¥í•œ ë¬¸ì œë“¤:")
print_info("1. ë‹¤ì¤‘ ì„ íƒ ëª¨ë“œ ë²„íŠ¼ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ?")
print_info("2. Ctrl+jë¡œ ë‹¤ì¤‘ ë³µì‚¬ê°€ ì œëŒ€ë¡œ ì•ˆë¨?")
print_info("3. Ctrl+kë¡œ ë‹¤ì¤‘ ë¶™ì—¬ë„£ê¸°ê°€ ì œëŒ€ë¡œ ì•ˆë¨?")
print_info("4. ë‹¤ì¤‘ ì„ íƒëœ ë¼ë²¨ë“¤ì´ í™”ë©´ì— ì œëŒ€ë¡œ í‘œì‹œ ì•ˆë¨?")
print()
print(f"{YELLOW}ë” ìì„¸í•œ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.{RESET}")
print()

# =================================================================
# ê²°ë¡ 
# =================================================================

print_header("ê²°ë¡ ")

print(f"{GREEN}âœ… ë§ˆìŠ¤í‚¹ ì •ë³´ íŒŒì¼ ì‚­ì œ ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ{RESET}")
print()
print("ìˆ˜ì •ëœ ê¸°ëŠ¥:")
print_success("âœ“ convert_label_to_mask() - _mask.npz íŒŒì¼ ì‚­ì œ ì¶”ê°€")
print()
print("ì˜ˆìƒ íš¨ê³¼:")
print_success("âœ“ labelâ†’mask í›„ ì™„ì „íˆ ê¹”ë”í•œ ì´ˆê¸°í™”")
print_success("âœ“ ë‹¤ìŒ í˜ì´ì§€ì—ì„œ l ë²„íŠ¼ ëˆŒëŸ¬ë„ ì´ì „ ë§ˆìŠ¤í‚¹ ì—†ìŒ")
print_success("âœ“ ë¶ˆí•„ìš”í•œ íŒŒì¼ ìë™ ì •ë¦¬")
print()
print(f"{YELLOW}âš ï¸  ë‹¤ì¤‘ ì„ íƒ ë³µì‚¬ ê¸°ëŠ¥ ë¬¸ì œëŠ” ì¶”ê°€ ì •ë³´ í•„ìš”{RESET}")
print()
print(f"{BLUE}ì»¤ë°‹ ì¤€ë¹„ ì™„ë£Œ âœ“{RESET}")
print()
