#!/usr/bin/env python3
"""
ì œì™¸ ì˜ì—­ ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ ê²€ì‚¬ ìˆ˜ì • ê²€ì¦
==========================================

ë¬¸ì œ: ì œì™¸ ì˜ì—­ì— ë¼ë²¨ì´ í¬í•¨ë˜ê±°ë‚˜ ê±¸ì³ì ¸ë„ ì‚­ì œ ì•ˆ ë¨
"""

print("=" * 80)
print("ì œì™¸ ì˜ì—­ ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ ê²€ì‚¬ ìˆ˜ì • ê²€ì¦")
print("=" * 80)
print()

print("ğŸ› ì‚¬ìš©ì ë³´ê³ :")
print()
print("ë¬¸ì œ:")
print("  - ì œì™¸ ì˜ì—­ì— ë¼ë²¨ì´ ì¼ë¶€ë¼ë„ ê²¹ì¹˜ë©´ ì œì™¸í•´ì•¼ í•¨")
print("  - í•˜ì§€ë§Œ í¬í•¨ë˜ê±°ë‚˜ ê±¸ì³ì ¸ë„ ì‚­ì œ ì•ˆ ë¨")
print()
print("ìš”êµ¬ì‚¬í•­:")
print("  - ì œì™¸ ì˜ì—­ì— ì¡°ê¸ˆì´ë¼ë„ ë©´ì ì´ ê²¹ì¹˜ë©´ ì‚­ì œ")
print("  - ì„ (line)ìœ¼ë¡œ í•˜ì§€ ë§ê³  ë©´ì (area)ìœ¼ë¡œ ê³„ì‚°")
print("  - AND ì¡°ê±´ìœ¼ë¡œ ë©´ì ìœ¼ë¡œ ê³„ì‚°í•˜ëŠ” ë°©ì‹")
print()

print("=" * 80)
print("ê·¼ë³¸ ì›ì¸ ë¶„ì„")
print("=" * 80)
print()

print("ğŸ” ë¬¸ì œ: ì¤‘ì‹¬ì ë§Œ í™•ì¸í•˜ëŠ” ë°©ì‹")
print("-" * 80)
print()
print("\033[93m[ê¸°ì¡´ ì½”ë“œ]\033[0m")
print()
print("""def is_bbox_in_exclusion_zone(self, bbox):
    x1, y1, x2, y2 = bbox[3], bbox[4], bbox[5], bbox[6]
    bbox_center = ((x1 + x2) / 2, (y1 + y2) / 2)  # âœ— ì¤‘ì‹¬ì ë§Œ ê³„ì‚°!

    for zone in zones_to_check:
        if zone['enabled'] and self._point_in_polygon(bbox_center, zone['points']):
            return True  # âœ— ì¤‘ì‹¬ì ì´ ì•ˆì— ìˆì„ ë•Œë§Œ True!
    return False""")
print()

print("\033[91m[ë¬¸ì œì ]\033[0m")
print("\033[91mâœ— - bboxì˜ ì¤‘ì‹¬ì ë§Œ í™•ì¸\033[0m")
print("\033[91mâœ— - bboxê°€ ì œì™¸ ì˜ì—­ê³¼ ê²¹ì¹˜ë”ë¼ë„ ì¤‘ì‹¬ì ì´ ë°–ì— ìˆìœ¼ë©´ ì‚­ì œ ì•ˆ ë¨\033[0m")
print("\033[91mâœ— - ì˜ˆ: bboxê°€ ì œì™¸ ì˜ì—­ ê²½ê³„ë¥¼ ê±¸ì¹˜ì§€ë§Œ ì¤‘ì‹¬ì€ ë°–ì— ìˆëŠ” ê²½ìš°\033[0m")
print()

print("ì˜ˆì‹œ ì¼€ì´ìŠ¤:")
print()
print("  ì¼€ì´ìŠ¤ 1: bbox ì¤‘ì‹¬ì€ ë°–, ì¼ë¶€ ê²¹ì¹¨")
print("    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("    â”‚ ì œì™¸ì˜ì—­ â”‚")
print("    â”‚    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”")
print("    â”‚    â”‚bboxâ”‚     â”‚  â† bbox ì¤‘ì‹¬ì´ ë°–ì— ìˆìŒ")
print("    â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”˜     â”‚")
print("         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("    ê²°ê³¼: âœ— ì‚­ì œ ì•ˆ ë¨ (ì¤‘ì‹¬ì ì´ ì œì™¸ì˜ì—­ ë°–)")
print()

print("  ì¼€ì´ìŠ¤ 2: bboxê°€ ì œì™¸ì˜ì—­ì„ ì™„ì „íˆ í¬í•¨")
print("    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("    â”‚   bbox       â”‚")
print("    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚")
print("    â”‚  â”‚ì œì™¸ì˜ì—­â”‚  â”‚  â† ì œì™¸ì˜ì—­ì´ bbox ì•ˆì— ìˆìŒ")
print("    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚")
print("    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("    ê²°ê³¼: âœ— ì‚­ì œ ì•ˆ ë¨ (ì œì™¸ì˜ì—­ ì ì´ bbox ì•ˆì— ìˆì§€ë§Œ ê°ì§€ ëª»í•¨)")
print()

print("\033[92m[ìˆ˜ì • í›„]\033[0m")
print()
print("""def is_bbox_in_exclusion_zone(self, bbox):
    x1, y1, x2, y2 = bbox[3], bbox[4], bbox[5], bbox[6]

    for zone in zones_to_check:
        if zone['enabled'] and self._bbox_polygon_overlap(x1, y1, x2, y2, zone['points']):
            return True  # âœ“ ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ í™•ì¸!
    return False

def _bbox_polygon_overlap(self, x1, y1, x2, y2, polygon):
    \"\"\"bboxì™€ í´ë¦¬ê³¤ì´ ê²¹ì¹˜ëŠ”ì§€ í™•ì¸ (ë©´ì  ê¸°ë°˜)\"\"\"

    # 1. bboxì˜ ë„¤ ëª¨ì„œë¦¬ ì¤‘ í•˜ë‚˜ë¼ë„ í´ë¦¬ê³¤ ì•ˆì— ìˆëŠ”ì§€ í™•ì¸
    bbox_corners = [(x1, y1), (x2, y1), (x1, y2), (x2, y2)]
    for corner in bbox_corners:
        if self._point_in_polygon(corner, polygon):
            return True  # âœ“ bbox ëª¨ì„œë¦¬ê°€ í´ë¦¬ê³¤ ì•ˆì— ìˆìŒ

    # 2. í´ë¦¬ê³¤ì˜ ì  ì¤‘ í•˜ë‚˜ë¼ë„ bbox ì•ˆì— ìˆëŠ”ì§€ í™•ì¸
    for point in polygon:
        px, py = point
        if x1 <= px <= x2 and y1 <= py <= y2:
            return True  # âœ“ í´ë¦¬ê³¤ ì ì´ bbox ì•ˆì— ìˆìŒ

    # 3. bboxì˜ ë³€ê³¼ í´ë¦¬ê³¤ì˜ ë³€ì´ êµì°¨í•˜ëŠ”ì§€ í™•ì¸
    # ... (ì„ ë¶„ êµì°¨ ê²€ì‚¬)
    if segments_intersect:
        return True  # âœ“ ë³€ë“¤ì´ êµì°¨í•¨

    return False  # ê²¹ì¹˜ì§€ ì•ŠìŒ""")
print()

print("=" * 80)
print("ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ ê²€ì‚¬ ì•Œê³ ë¦¬ì¦˜")
print("=" * 80)
print()

print("âœ… 3ë‹¨ê³„ ê²€ì‚¬:")
print()

print("1ï¸âƒ£ bbox ëª¨ì„œë¦¬ ê²€ì‚¬")
print("-" * 80)
print("  - bboxì˜ ë„¤ ëª¨ì„œë¦¬: ì™¼ìª½ìœ„, ì˜¤ë¥¸ìª½ìœ„, ì™¼ìª½ì•„ë˜, ì˜¤ë¥¸ìª½ì•„ë˜")
print("  - ëª¨ì„œë¦¬ ì¤‘ í•˜ë‚˜ë¼ë„ í´ë¦¬ê³¤ ì•ˆì— ìˆìœ¼ë©´ ê²¹ì¹¨")
print()
print("  ì˜ˆ:")
print("    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("    â”‚ ì œì™¸ì˜ì—­ â”‚")
print("    â”‚    â—â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”")
print("    â”‚    â”‚bboxâ”‚     â”‚  â— = bbox ëª¨ì„œë¦¬")
print("    â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”˜     â”‚")
print("         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("    ê²°ê³¼: âœ“ ì™¼ìª½ìœ„ ëª¨ì„œë¦¬ê°€ ì œì™¸ì˜ì—­ ì•ˆ â†’ ì‚­ì œ!")
print()

print("2ï¸âƒ£ í´ë¦¬ê³¤ ì  ê²€ì‚¬")
print("-" * 80)
print("  - í´ë¦¬ê³¤ì˜ ì  ì¤‘ í•˜ë‚˜ë¼ë„ bbox ì•ˆì— ìˆìœ¼ë©´ ê²¹ì¹¨")
print("  - bboxê°€ ì œì™¸ì˜ì—­ì„ í¬í•¨í•˜ëŠ” ê²½ìš° ê°ì§€")
print()
print("  ì˜ˆ:")
print("    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("    â”‚   bbox       â”‚")
print("    â”‚  â—â”€â”€â”€â”€â”€â”€â”€â”€â—  â”‚")
print("    â”‚  â”‚ì œì™¸ì˜ì—­â”‚  â”‚  â— = í´ë¦¬ê³¤ ì ")
print("    â”‚  â—â”€â”€â”€â”€â”€â”€â”€â”€â—  â”‚")
print("    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("    ê²°ê³¼: âœ“ í´ë¦¬ê³¤ ì ì´ bbox ì•ˆ â†’ ì‚­ì œ!")
print()

print("3ï¸âƒ£ ë³€ êµì°¨ ê²€ì‚¬")
print("-" * 80)
print("  - bboxì˜ 4ê°œ ë³€ê³¼ í´ë¦¬ê³¤ì˜ ë³€ë“¤ì´ êµì°¨í•˜ëŠ”ì§€ í™•ì¸")
print("  - CCW (Counter-Clockwise) ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©")
print()
print("  ì˜ˆ:")
print("    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("    â”‚ ì œì™¸ì˜ì—­ â”‚")
print("    â”‚    X    â”‚      X = ë³€ êµì°¨ì ")
print("    â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”˜")
print("    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”")
print("    â”‚   bbox    â”‚")
print("    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("    ê²°ê³¼: âœ“ ë³€ì´ êµì°¨ â†’ ì‚­ì œ!")
print()

print("=" * 80)
print("ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸")
print("=" * 80)
print()

print("ì‹œë‚˜ë¦¬ì˜¤ 1: bbox ì¼ë¶€ê°€ ì œì™¸ì˜ì—­ì— ê²¹ì¹¨")
print("-" * 80)
print()
print("1ï¸âƒ£ ê¸°ì¡´ ë™ì‘ (ë²„ê·¸)")
print("  - bbox ì¤‘ì‹¬ì  ê³„ì‚°: (ì¤‘ì‹¬X, ì¤‘ì‹¬Y)")
print("  - ì¤‘ì‹¬ì ì´ ì œì™¸ì˜ì—­ ë°–ì— ìˆìŒ")
print("\033[91mâœ—  - ê²°ê³¼: ì‚­ì œ ì•ˆ ë¨ (ê²¹ì¹˜ëŠ”ë°ë„!)\033[0m")
print()

print("2ï¸âƒ£ ìˆ˜ì •ëœ ë™ì‘")
print("  - bbox ëª¨ì„œë¦¬ 4ê°œ í™•ì¸")
print("  - ì™¼ìª½ìœ„ ëª¨ì„œë¦¬ê°€ ì œì™¸ì˜ì—­ ì•ˆì— ìˆìŒ")
print("\033[92mâœ“  - ê²°ê³¼: ì‚­ì œë¨!\033[0m")
print()

print("ì‹œë‚˜ë¦¬ì˜¤ 2: bboxê°€ ì œì™¸ì˜ì—­ì„ ì™„ì „íˆ í¬í•¨")
print("-" * 80)
print()
print("1ï¸âƒ£ ê¸°ì¡´ ë™ì‘ (ë²„ê·¸)")
print("  - bbox ì¤‘ì‹¬ì ì´ ì œì™¸ì˜ì—­ ì•ˆì— ìˆì„ ìˆ˜ë„, ë°–ì— ìˆì„ ìˆ˜ë„")
print("\033[91mâœ—  - ê²°ê³¼: ì¤‘ì‹¬ì  ìœ„ì¹˜ì— ë”°ë¼ ë¶ˆí™•ì‹¤\033[0m")
print()

print("2ï¸âƒ£ ìˆ˜ì •ëœ ë™ì‘")
print("  - í´ë¦¬ê³¤ ì ë“¤ í™•ì¸")
print("  - í´ë¦¬ê³¤ ì ë“¤ì´ ëª¨ë‘ bbox ì•ˆì— ìˆìŒ")
print("\033[92mâœ“  - ê²°ê³¼: ì‚­ì œë¨!\033[0m")
print()

print("ì‹œë‚˜ë¦¬ì˜¤ 3: bboxì™€ ì œì™¸ì˜ì—­ì´ êµì°¨ (Xì í˜•íƒœ)")
print("-" * 80)
print()
print("1ï¸âƒ£ ê¸°ì¡´ ë™ì‘ (ë²„ê·¸)")
print("  - bbox ì¤‘ì‹¬ì ì´ ì œì™¸ì˜ì—­ ë°–ì— ìˆì„ ìˆ˜ ìˆìŒ")
print("\033[91mâœ—  - ê²°ê³¼: ì‚­ì œ ì•ˆ ë¨ (êµì°¨í•˜ëŠ”ë°ë„!)\033[0m")
print()

print("2ï¸âƒ£ ìˆ˜ì •ëœ ë™ì‘")
print("  - bboxì˜ ë³€ê³¼ í´ë¦¬ê³¤ì˜ ë³€ êµì°¨ í™•ì¸")
print("  - ë³€ë“¤ì´ êµì°¨í•¨")
print("\033[92mâœ“  - ê²°ê³¼: ì‚­ì œë¨!\033[0m")
print()

print("=" * 80)
print("ìˆ˜ì • ìš”ì•½")
print("=" * 80)
print()

print("1ï¸âƒ£ is_bbox_in_exclusion_zone() ìˆ˜ì • (ë¼ì¸ 77-93)")
print("-" * 80)
print("\033[92mâœ“ - ì¤‘ì‹¬ì  ê²€ì‚¬ ì œê±°\033[0m")
print("\033[92mâœ“ - _bbox_polygon_overlap() í˜¸ì¶œë¡œ ë³€ê²½\033[0m")
print()

print("2ï¸âƒ£ _bbox_polygon_overlap() ì¶”ê°€ (ë¼ì¸ 95-136)")
print("-" * 80)
print("\033[92mâœ“ - bbox ëª¨ì„œë¦¬ 4ê°œ ê²€ì‚¬\033[0m")
print("\033[92mâœ“ - í´ë¦¬ê³¤ ì  ê²€ì‚¬ (bbox ì•ˆì— ìˆëŠ”ì§€)\033[0m")
print("\033[92mâœ“ - bbox ë³€ê³¼ í´ë¦¬ê³¤ ë³€ êµì°¨ ê²€ì‚¬\033[0m")
print("\033[92mâœ“ - ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ íŒë‹¨\033[0m")
print()

print("3ï¸âƒ£ _segments_intersect() ì¶”ê°€ (ë¼ì¸ 138-149)")
print("-" * 80)
print("\033[92mâœ“ - CCW (Counter-Clockwise) ì•Œê³ ë¦¬ì¦˜\033[0m")
print("\033[92mâœ“ - ë‘ ì„ ë¶„ì´ êµì°¨í•˜ëŠ”ì§€ ì •í™•íˆ íŒë‹¨\033[0m")
print()

print("=" * 80)
print("ì˜ˆìƒ ê²°ê³¼")
print("=" * 80)
print()

print("âœ… ìˆ˜ì • íš¨ê³¼:")
print("\033[92mâœ“ 1. ì œì™¸ ì˜ì—­ì— ì¡°ê¸ˆì´ë¼ë„ ê²¹ì¹˜ë©´ ì‚­ì œë¨\033[0m")
print("\033[92mâœ“ 2. bboxê°€ ì œì™¸ì˜ì—­ì„ í¬í•¨í•˜ëŠ” ê²½ìš°ë„ ì‚­ì œë¨\033[0m")
print("\033[92mâœ“ 3. bboxì™€ ì œì™¸ì˜ì—­ì´ êµì°¨í•˜ëŠ” ê²½ìš°ë„ ì‚­ì œë¨\033[0m")
print("\033[92mâœ“ 4. ë©´ì  ê¸°ë°˜ ì •í™•í•œ ê²¹ì¹¨ íŒë‹¨\033[0m")
print("\033[92mâœ“ 5. ëª¨ë“  ê²¹ì¹¨ ì¼€ì´ìŠ¤ ì™„ë²½ ì²˜ë¦¬\033[0m")
print()

print("ğŸ” ì•Œê³ ë¦¬ì¦˜ íŠ¹ì§•:")
print("  - AND ì¡°ê±´ìœ¼ë¡œ ë©´ì  ê³„ì‚° (ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­)")
print("  - ì„ (line)ì´ ì•„ë‹Œ ë©´ì (area) ê¸°ë°˜")
print("  - 3ë‹¨ê³„ ê²€ì‚¬ë¡œ ëª¨ë“  ê²¹ì¹¨ ì¼€ì´ìŠ¤ ì»¤ë²„")
print()

print("=" * 80)
print("í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸")
print("=" * 80)
print()

print("[ ] 1. bbox ì¼ë¶€ ê²¹ì¹¨ í…ŒìŠ¤íŠ¸")
print("      - ì œì™¸ì˜ì—­ ì„¤ì •")
print("      - bboxë¥¼ ì œì™¸ì˜ì—­ ê²½ê³„ì— ê±¸ì¹˜ë„ë¡ ê·¸ë¦¬ê¸°")
print("      - ì‚­ì œë˜ëŠ”ì§€ í™•ì¸")
print()

print("[ ] 2. bboxê°€ ì œì™¸ì˜ì—­ í¬í•¨ í…ŒìŠ¤íŠ¸")
print("      - ì‘ì€ ì œì™¸ì˜ì—­ ì„¤ì •")
print("      - í° bboxë¡œ ì œì™¸ì˜ì—­ í¬í•¨")
print("      - ì‚­ì œë˜ëŠ”ì§€ í™•ì¸")
print()

print("[ ] 3. êµì°¨ í…ŒìŠ¤íŠ¸")
print("      - ëŒ€ê°ì„  í˜•íƒœë¡œ êµì°¨í•˜ë„ë¡ ì„¤ì •")
print("      - bboxì™€ ì œì™¸ì˜ì—­ì´ Xìë¡œ êµì°¨")
print("      - ì‚­ì œë˜ëŠ”ì§€ í™•ì¸")
print()

print("[ ] 4. ê²¹ì¹˜ì§€ ì•ŠëŠ” ê²½ìš° í…ŒìŠ¤íŠ¸")
print("      - ì œì™¸ì˜ì—­ê³¼ ì™„ì „íˆ ë–¨ì–´ì§„ bbox")
print("      - ì‚­ì œë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸")
print()

print("=" * 80)
print("ê²°ë¡ ")
print("=" * 80)
print()

print("\033[92mâœ… ì œì™¸ ì˜ì—­ ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ ê²€ì‚¬ ì™„ë£Œ\033[0m")
print()
print("ì¶”ê°€ëœ í•¨ìˆ˜:")
print("\033[92mâœ“ 1. _bbox_polygon_overlap() - ë©´ì  ê¸°ë°˜ ê²¹ì¹¨ ê²€ì‚¬\033[0m")
print("\033[92mâœ“ 2. _segments_intersect() - ì„ ë¶„ êµì°¨ ê²€ì‚¬ (CCW)\033[0m")
print()
print("ìˆ˜ì •ëœ í•¨ìˆ˜:")
print("\033[92mâœ“ 1. is_bbox_in_exclusion_zone() - ë©´ì  ê²€ì‚¬ ë°©ì‹ìœ¼ë¡œ ë³€ê²½\033[0m")
print()
print("ì˜ˆìƒ íš¨ê³¼:")
print("\033[92mâœ“ âœ“ ì œì™¸ ì˜ì—­ì— ì¡°ê¸ˆì´ë¼ë„ ê²¹ì¹˜ë©´ ì •í™•íˆ ì‚­ì œ\033[0m")
print("\033[92mâœ“ âœ“ ëª¨ë“  ê²¹ì¹¨ ì¼€ì´ìŠ¤ ì™„ë²½ ì²˜ë¦¬\033[0m")
print("\033[92mâœ“ âœ“ ë©´ì  ê¸°ë°˜ ì •í™•í•œ íŒë‹¨\033[0m")
print()
print("\033[94mì»¤ë°‹ ì¤€ë¹„ ì™„ë£Œ âœ“\033[0m")
