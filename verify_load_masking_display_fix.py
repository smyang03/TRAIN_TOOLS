#!/usr/bin/env python3
"""
ë§ˆìŠ¤í‚¹ ë¡œë“œ(l í‚¤) í™”ë©´ í‘œì‹œ ìˆ˜ì • ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
===============================================

ë¬¸ì œ: l í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ë³µì‚¬ ì‹œ "ë§ˆìŠ¤í‚¹ì´ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ë§ˆìŠ¤í‚¹ì´ ê·¸ë ¤ì§€ì§€ ì•ŠìŒ"
"""

print("=" * 80)
print("ë§ˆìŠ¤í‚¹ ë¡œë“œ(l í‚¤) í™”ë©´ í‘œì‹œ ìˆ˜ì • ê²€ì¦")
print("=" * 80)
print()

print("ğŸ› ì‚¬ìš©ì ë³´ê³ :")
print()
print("ë¡œê·¸ ë©”ì‹œì§€:")
print("  'ë§ˆìŠ¤í‚¹ì´ ì´ë¯¸ì§€ íŒŒì¼ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: [íŒŒì¼ëª…]'")
print("  'ë§ˆìŠ¤í‚¹ì´ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ë§ˆìŠ¤í‚¹ì´ ê·¸ë ¤ì§€ì§€ ì•ŠìŒ'")
print()
print("ë¬¸ì œ:")
print("  - l í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ë³µì‚¬")
print("  - íŒŒì¼ì—ëŠ” ì €ì¥ë¨")
print("  - í•˜ì§€ë§Œ í™”ë©´ì—ëŠ” ë§ˆìŠ¤í‚¹ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ")
print()

print("=" * 80)
print("ê·¼ë³¸ ì›ì¸ ë¶„ì„")
print("=" * 80)
print()

print("ğŸ” ë¬¸ì œ: load_masking() í›„ draw_image() ì¬í˜¸ì¶œë¡œ ë§ˆìŠ¤í‚¹ ì‚¬ë¼ì§")
print("-" * 80)
print()
print("\033[93m[ê¸°ì¡´ ì½”ë“œ]\033[0m")
print()
print("""def on_key(self, event):
    # ...
    elif ckey == keysetting[32]:  # l í‚¤
        self.l_region = True
        self.load_masking()  # ë§ˆìŠ¤í‚¹ì„ í™”ë©´ì— í‘œì‹œ
        # âœ— ì—¬ê¸°ì„œ returní•˜ì§€ ì•ŠìŒ!

    # ë‚˜ë¨¸ì§€ ì—…ë°ì´íŠ¸ (ê³„ì† ì‹¤í–‰ë¨)
    if self.ci == self.pi:
        self.draw_bbox()
    else:
        self.write_bbox()
        self.draw_image()  # âœ— ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¡œë“œí•´ì„œ í‘œì‹œ!

# load_masking()ì˜ ë™ì‘:
def load_masking(self):
    # 1. ë§ˆìŠ¤í‚¹ì„ self.current_img_arrayì— ì ìš©
    self.current_img_array[self.masking] = [255, 0, 255]

    # 2. í™”ë©´ì— ë§ˆìŠ¤í‚¹ í‘œì‹œ
    display_img = Image.fromarray(self.current_img_array)
    resized_img = display_img.resize(self.imsize, Image.LANCZOS)
    self.canvas.image = ImageTk.PhotoImage(resized_img)
    self.canvas.create_image(0, 0, image=self.canvas.image, anchor='nw', tags="img")

    # 3. íŒŒì¼ì— ì €ì¥
    img_to_save = Image.fromarray(self.current_img_array)
    img_to_save.save(self.im_fn)
    print("ë§ˆìŠ¤í‚¹ì´ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.")""")
print()

print("\033[91m[ë¬¸ì œì ]\033[0m")
print("\033[91mâœ— - load_masking()ì—ì„œ í™”ë©´ì— ë§ˆìŠ¤í‚¹ì„ í‘œì‹œí•¨\033[0m")
print("\033[91mâœ— - í•˜ì§€ë§Œ on_key()ê°€ ê³„ì† ì‹¤í–‰ë˜ì–´ draw_image() í˜¸ì¶œ\033[0m")
print("\033[91mâœ— - draw_image()ê°€ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¡œë“œí•´ì„œ í™”ë©´ ê°±ì‹ \033[0m")
print("\033[91mâœ— - ê²°ê³¼: ë§ˆìŠ¤í‚¹ì´ í™”ë©´ì—ì„œ ì‚¬ë¼ì§!\033[0m")
print()

print("\033[92m[ìˆ˜ì • í›„]\033[0m")
print()
print("""def on_key(self, event):
    # ...
    elif ckey == keysetting[31]:  # s í‚¤
        self.s_region = True
        self.get_masking()
        return  # âœ“ get_masking() í›„ ì¦‰ì‹œ ë¦¬í„´

    elif ckey == keysetting[32]:  # l í‚¤
        self.l_region = True
        self.load_masking()
        return  # âœ“ load_masking() í›„ ì¦‰ì‹œ ë¦¬í„´ (draw_image í˜¸ì¶œ ë°©ì§€)

    # âœ“ s/l í‚¤ì˜ ê²½ìš° ì—¬ê¸°ê¹Œì§€ ì˜¤ì§€ ì•ŠìŒ!
    # ë‚˜ë¨¸ì§€ ì—…ë°ì´íŠ¸
    if self.ci == self.pi:
        self.draw_bbox()
    else:
        self.write_bbox()
        self.draw_image()""")
print()

print("=" * 80)
print("ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸")
print("=" * 80)
print()

print("ì‹œë‚˜ë¦¬ì˜¤ 1: l í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ë³µì‚¬")
print("-" * 80)
print()
print("1ï¸âƒ£ ê¸°ì¡´ ë™ì‘ (ë²„ê·¸)")
print("  1. ì²« ì´ë¯¸ì§€ì—ì„œ ë§ˆìŠ¤í‚¹ ìƒì„± (m í‚¤ + s í‚¤)")
print("  2. ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ì´ë™")
print("  3. l í‚¤ ëˆ„ë¦„ â†’ load_masking() í˜¸ì¶œ")
print("     - self.current_img_arrayì— ë§ˆìŠ¤í‚¹ ì ìš©")
print("     - í™”ë©´ì— ë§ˆìŠ¤í‚¹ í‘œì‹œ (canvas.create_image)")
print("     - íŒŒì¼ì— ë§ˆìŠ¤í‚¹ ì €ì¥")
print("     - 'ë§ˆìŠ¤í‚¹ì´ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤' ì¶œë ¥")
print("\033[91mâœ—  4. on_key() ê³„ì† ì‹¤í–‰ â†’ draw_image() í˜¸ì¶œ\033[0m")
print("\033[91mâœ—  5. draw_image()ê°€ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¡œë“œí•´ì„œ í™”ë©´ ê°±ì‹ \033[0m")
print("\033[91mâœ—  6. ê²°ê³¼: í™”ë©´ì— ë§ˆìŠ¤í‚¹ ì‚¬ë¼ì§!\033[0m")
print("     (í•˜ì§€ë§Œ íŒŒì¼ì—ëŠ” ì €ì¥ë˜ì–´ ìˆì–´ì„œ ë‹¤ì‹œ ì´ë¯¸ì§€ ë¡œë“œí•˜ë©´ ë³´ì„)")
print()

print("2ï¸âƒ£ ìˆ˜ì •ëœ ë™ì‘")
print("  1. ì²« ì´ë¯¸ì§€ì—ì„œ ë§ˆìŠ¤í‚¹ ìƒì„± (m í‚¤ + s í‚¤)")
print("  2. ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ì´ë™")
print("  3. l í‚¤ ëˆ„ë¦„ â†’ load_masking() í˜¸ì¶œ")
print("     - self.current_img_arrayì— ë§ˆìŠ¤í‚¹ ì ìš©")
print("     - í™”ë©´ì— ë§ˆìŠ¤í‚¹ í‘œì‹œ (canvas.create_image)")
print("     - íŒŒì¼ì— ë§ˆìŠ¤í‚¹ ì €ì¥")
print("     - 'ë§ˆìŠ¤í‚¹ì´ ë©”ëª¨ë¦¬ì— ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤' ì¶œë ¥")
print("\033[92mâœ“  4. on_key()ì—ì„œ ì¦‰ì‹œ return\033[0m")
print("\033[92mâœ“  5. draw_image() í˜¸ì¶œë˜ì§€ ì•ŠìŒ\033[0m")
print("\033[92mâœ“  6. ê²°ê³¼: í™”ë©´ì— ë§ˆìŠ¤í‚¹ ì •ìƒ í‘œì‹œë¨!\033[0m")
print()

print("ì‹œë‚˜ë¦¬ì˜¤ 2: s í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ì €ì¥")
print("-" * 80)
print()
print("1ï¸âƒ£ ê¸°ì¡´ ë™ì‘")
print("  1. m í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ê·¸ë¦¬ê¸°")
print("  2. s í‚¤ ëˆ„ë¦„ â†’ get_masking() í˜¸ì¶œ")
print("     - ë©”ëª¨ë¦¬ì— ë§ˆìŠ¤í‚¹ ì €ì¥")
print("     - í™”ë©´ ì—…ë°ì´íŠ¸")
print("\033[91mâœ—  3. on_key() ê³„ì† ì‹¤í–‰ â†’ draw_image() í˜¸ì¶œ\033[0m")
print("\033[91mâœ—  4. ë¶ˆí•„ìš”í•œ í™”ë©´ ê°±ì‹  ë°œìƒ\033[0m")
print()

print("2ï¸âƒ£ ìˆ˜ì •ëœ ë™ì‘")
print("  1. m í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ê·¸ë¦¬ê¸°")
print("  2. s í‚¤ ëˆ„ë¦„ â†’ get_masking() í˜¸ì¶œ")
print("     - ë©”ëª¨ë¦¬ì— ë§ˆìŠ¤í‚¹ ì €ì¥")
print("     - í™”ë©´ ì—…ë°ì´íŠ¸")
print("\033[92mâœ“  3. on_key()ì—ì„œ ì¦‰ì‹œ return\033[0m")
print("\033[92mâœ“  4. ë¶ˆí•„ìš”í•œ draw_image() í˜¸ì¶œ ë°©ì§€\033[0m")
print()

print("=" * 80)
print("ìˆ˜ì • ìš”ì•½")
print("=" * 80)
print()

print("1ï¸âƒ£ on_key() ìˆ˜ì • (ë¼ì¸ 4483-4488)")
print("-" * 80)
print("\033[92mâœ“ - s í‚¤ (keysetting[31]) ì²˜ë¦¬ í›„ return ì¶”ê°€\033[0m")
print("\033[92mâœ“ - l í‚¤ (keysetting[32]) ì²˜ë¦¬ í›„ return ì¶”ê°€\033[0m")
print("\033[92mâœ“ - get_masking() / load_masking() í›„ draw_image() í˜¸ì¶œ ë°©ì§€\033[0m")
print()

print("=" * 80)
print("ì˜ˆìƒ ê²°ê³¼")
print("=" * 80)
print()

print("âœ… ìˆ˜ì • íš¨ê³¼:")
print("\033[92mâœ“ 1. l í‚¤ ëˆ„ë¥´ë©´ ë§ˆìŠ¤í‚¹ì´ í™”ë©´ì— ì¦‰ì‹œ í‘œì‹œë¨\033[0m")
print("\033[92mâœ“ 2. ë§ˆìŠ¤í‚¹ ë³µì‚¬ í›„ í™”ë©´ì—ì„œ ì‚¬ë¼ì§€ì§€ ì•ŠìŒ\033[0m")
print("\033[92mâœ“ 3. s í‚¤ í›„ ë¶ˆí•„ìš”í•œ í™”ë©´ ê°±ì‹  ë°©ì§€\033[0m")
print("\033[92mâœ“ 4. ëª¨ë“  ë§ˆìŠ¤í‚¹ ê¸°ëŠ¥ì´ ì¦‰ì‹œ í™”ë©´ì— ë°˜ì˜ë¨\033[0m")
print()

print("ğŸ” ì¶”ê°€ ë””ë²„ê¹… ë¡œê·¸:")
print("  - load_masking()ì—ì„œ ì´ë¯¸ í™”ë©´ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ")
print("  - draw_image() ì¬í˜¸ì¶œì€ ë¶ˆí•„ìš”í•˜ê³  ì˜¤íˆë ¤ ë¬¸ì œë¥¼ ë°œìƒì‹œí‚´")
print()

print("=" * 80)
print("í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸")
print("=" * 80)
print()

print("[ ] 1. l í‚¤ ë§ˆìŠ¤í‚¹ ë³µì‚¬ í…ŒìŠ¤íŠ¸")
print("      - ì²« ì´ë¯¸ì§€ì—ì„œ ë§ˆìŠ¤í‚¹ ìƒì„± (m + s)")
print("      - ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ì´ë™")
print("      - l í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ë³µì‚¬")
print("      - í™”ë©´ì— ë§ˆìŠ¤í‚¹ì´ ì¦‰ì‹œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸")
print()

print("[ ] 2. s í‚¤ ë§ˆìŠ¤í‚¹ ì €ì¥ í…ŒìŠ¤íŠ¸")
print("      - m í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ê·¸ë¦¬ê¸°")
print("      - s í‚¤ë¡œ ì €ì¥")
print("      - í™”ë©´ì— ë§ˆìŠ¤í‚¹ì´ ì •ìƒ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸")
print()

print("[ ] 3. ì—°ì† ë³µì‚¬ í…ŒìŠ¤íŠ¸")
print("      - ì—¬ëŸ¬ ì´ë¯¸ì§€ì— l í‚¤ë¡œ ì—°ì† ë³µì‚¬")
print("      - ê° ì´ë¯¸ì§€ì—ì„œ ë§ˆìŠ¤í‚¹ì´ í™”ë©´ì— í‘œì‹œë˜ëŠ”ì§€ í™•ì¸")
print()

print("=" * 80)
print("ê²°ë¡ ")
print("=" * 80)
print()

print("\033[92mâœ… ë§ˆìŠ¤í‚¹ í™”ë©´ í‘œì‹œ ë¬¸ì œ í•´ê²° ì™„ë£Œ\033[0m")
print()
print("ìˆ˜ì •ëœ í•¨ìˆ˜:")
print("\033[92mâœ“ 1. on_key() - s/l í‚¤ ì²˜ë¦¬ í›„ return ì¶”ê°€\033[0m")
print()
print("ì˜ˆìƒ íš¨ê³¼:")
print("\033[92mâœ“ âœ“ l í‚¤ë¡œ ë§ˆìŠ¤í‚¹ ë³µì‚¬ ì‹œ í™”ë©´ì— ì¦‰ì‹œ í‘œì‹œ\033[0m")
print("\033[92mâœ“ âœ“ s í‚¤ í›„ ë¶ˆí•„ìš”í•œ í™”ë©´ ê°±ì‹  ë°©ì§€\033[0m")
print("\033[92mâœ“ âœ“ ëª¨ë“  ë§ˆìŠ¤í‚¹ ì‘ì—…ì´ í™”ë©´ì— ì •í™•íˆ ë°˜ì˜\033[0m")
print()
print("\033[94mì»¤ë°‹ ì¤€ë¹„ ì™„ë£Œ âœ“\033[0m")
